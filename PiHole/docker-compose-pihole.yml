# Docker Compose version
version: "3"

# Define services (containers to be created)
services:
  # Service name: pihole
  pihole:
    # Name of the container instance
    container_name: pihole

    # Image to use for this container
    # Use the specified version of the pihole image
    image: pihole/pihole:latest

    # Expose and map ports (host:container)
    ports:
      - "53:53/tcp" # DNS (TCP)
      - "53:53/udp" # DNS (UDP)
      - "547:547/udp" # DNS (UDP)
      - "67:67/udp" # DNS (UDP)
      - "39165:80/tcp" # Web UI HTTP

    # Environment variables
    environment:
      TZ: "Eurpoe/London" # Time Zone; Update this to your time zone
      WEBPASSWORD: "casaos" # Admin password for web UI; Change this to your desired admin password
      PROXY_LOCATION: "pi.hole"
      VIRTUAL_HOST: "pi.hole"

    # Mount volumes for persistent data
    volumes:
      - "/mnt/Storage1_nvme0n1p1/DATA/AppData/pihole/data/pihole:/etc/pihole" # Pi-hole data
      - "/mnt/Storage1_nvme0n1p1/DATA/AppData/pihole/data/dnsmasq:/etc/dnsmasq.d" # dnsmasq data

    # Restart policy for the container when it exits
    restart: unless-stopped